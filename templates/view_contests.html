{{ template "base.html" . }}

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="flex flex-col sm:flex-row items-end justify-between gap-6 mb-10">
        <div class="flex space-x-4">
            <a href="/panel/admin"
                class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition duration-200 flex items-center text-sm">
                <img src="/assets/icon/house.svg" alt="Home Icon" class="h-4 w-4 mr-2 invert" />
                Back to Dashboard
            </a>
        </div>

        <div class="w-full sm:w-auto relative group rounded-xl overflow-hidden grid grid-cols-5 gap-3">
            <div
                class="relative p-6 rounded-xl bg-blue-600/20 border border-blue-700/30 shadow-xl hover:shadow-2xl transition-all duration-300">
                <div class="flex items-center justify-between gap-3">
                    <div>
                        <p class="text-gray-400 text-xs font-medium uppercase tracking-wider">
                            Waiting
                        </p>
                        <p class="text-3xl text-white font-bold mt-1">
                            {{ .numberOfWaitingContests }}
                        </p>
                    </div>
                </div>
            </div>
            <div
                class="relative p-6 rounded-xl bg-green-600/20 border border-green-700/30 shadow-xl hover:shadow-2xl transition-all duration-300">
                <div class="flex items-center justify-between gap-3">
                    <div>
                        <p class="text-gray-400 text-xs font-medium uppercase tracking-wider">
                            Open
                        </p>
                        <p class="text-3xl text-white font-bold mt-1">
                            {{ .numberOfOpenContests }}
                        </p>
                    </div>
                </div>
            </div>
            <div
                class="relative p-6 rounded-xl bg-yellow-600/20 border border-yellow-700/30 shadow-xl hover:shadow-2xl transition-all duration-300">
                <div class="flex items-center justify-between gap-3">
                    <div>
                        <p class="text-gray-400 text-xs font-medium uppercase tracking-wider">
                            Judging
                        </p>
                        <p class="text-3xl text-white font-bold mt-1">
                            {{ .numberOfJudgingContests }}
                        </p>
                    </div>
                </div>
            </div>
            <div
                class="relative p-6 rounded-xl bg-orange-600/20 border border-orange-700/30 shadow-xl hover:shadow-2xl transition-all duration-300">
                <div class="flex items-center justify-between gap-3">
                    <div>
                        <p class="text-gray-400 text-xs font-medium uppercase tracking-wider">
                            Results
                        </p>
                        <p class="text-3xl text-white font-bold mt-1">
                            {{ .numberOfResultsContests }}
                        </p>
                    </div>
                </div>
            </div>
            <div
                class="relative p-6 rounded-xl bg-red-600/20 border border-red-700/30 shadow-xl hover:shadow-2xl transition-all duration-300">
                <div class="flex items-center justify-between gap-3">
                    <div>
                        <p class="text-gray-400 text-xs font-medium uppercase tracking-wider">
                            Closed
                        </p>
                        <p class="text-3xl text-white font-bold mt-1">
                            {{ .numberOfClosedContests }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="contests" class="relative group mb-10">
        <div class="absolute rounded-lg blur opacity-10 group-hover:opacity-20 transition duration-200"></div>
        <div class="relative bg-gray-800 rounded-lg shadow-lg overflow-hidden border border-gray-700">
            <div class="flex items-center justify-between p-6 border-b border-gray-700">
                <div class="flex items-center">
                    <div class="p-2 bg-purple-600/20 rounded-lg text-purple-400 mr-3">
                        <img src="/assets/icon/flag.svg" alt="Contests Icon" class="h-5 w-5 invert" />
                    </div>
                    <h2 class="text-xl font-bold text-white">Contest Management</h2>
                </div>
                <a href="/panel/contests/add"
                    class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition duration-200 inline-flex items-center text-sm">
                    <img src="/assets/icon/circle-plus.svg" alt="Add" class="h-4 w-4 mr-2 invert" />
                    <span>Create Contest</span>
                </a>
            </div>

            <div class="p-6 border-b border-gray-700">
                {{ if .Error }}
                <div class="p-4 mb-6 bg-red-500/20 border border-red-600/30 rounded-lg">
                    <p class="text-red-400">{{ .Error }}</p>
                </div>
                {{ end }}

                <div class="flex items-center space-x-2 mb-6">
                    <ul
                        class="flex rounded-xl bg-gray-700/50 border border-gray-700 flex-wrap text-sm font-medium text-center overflow-hidden">
                        <li>
                            <button class="inline-block px-4 py-2 bg-gray-700 text-white transition-all" id="total-tab"
                                data-tabs-target="#total" type="button" role="tab" aria-controls="profile"
                                aria-selected="true">
                                All Contests
                            </button>
                        </li>
                        <li>
                            <button
                                class="inline-block px-4 py-2 text-gray-300 hover:bg-gray-700/80 hover:text-white transition-all"
                                id="waiting-tab" data-tabs-target="#waiting" type="button" role="tab"
                                aria-controls="dashboard" aria-selected="false">
                                Waiting
                            </button>
                        </li>
                        <li>
                            <button
                                class="inline-block px-4 py-2 text-gray-300 hover:bg-gray-700/80 hover:text-white transition-all"
                                id="active-tab" data-tabs-target="#active" type="button" role="tab"
                                aria-controls="dashboard" aria-selected="false">
                                Active
                            </button>
                        </li>
                        <li>
                            <button
                                class="inline-block px-4 py-2 text-gray-300 hover:bg-gray-700/80 hover:text-white transition-all"
                                id="judging-tab" data-tabs-target="#judging" type="button" role="tab"
                                aria-controls="dashboard" aria-selected="false">
                                Judging
                            </button>
                        </li>
                        <li>
                            <button
                                class="inline-block px-4 py-2 text-gray-300 hover:bg-gray-700/80 hover:text-white transition-all"
                                id="results-tab" data-tabs-target="#results" type="button" role="tab"
                                aria-controls="ended" aria-selected="false">
                                Results
                            </button>
                        </li>
                        <li>
                            <button
                                class="inline-block px-4 py-2 text-gray-300 hover:bg-gray-700/80 hover:text-white transition-all"
                                id="closed-tab" data-tabs-target="#closed" type="button" role="tab"
                                aria-controls="ended" aria-selected="false">
                                Closed
                            </button>
                        </li>
                    </ul>
                </div>

                <div id="default-tab-content">
                    <div class="rounded-lg" id="total" role="tabpanel" aria-labelledby="total-tab">
                        <div class="space-y-4">
                            {{ if .Contests }}
                            {{ range .Contests }}
                            <div
                                class="flex items-center justify-between p-4 bg-gray-700/50 rounded-lg border border-gray-600 hover:bg-gray-700 transition-colors">
                                <div class="flex items-center space-x-4">
                                    {{ if .HasThumbnail }}
                                    <div class="relative">
                                        <img src="{{ printf " /assets/contest/%d/thumbnail.jpg" .ContestId }}"
                                            alt="{{ .Name }}" class="h-16 w-auto rounded-lg border border-gray-600" />
                                    </div>
                                    {{ else }}
                                    <div class="h-16 w-16 rounded-lg bg-gray-600 flex items-center justify-center">
                                        <img src="/assets/icon/image-off.svg" alt="No Image"
                                            class="h-8 w-8 invert opacity-30" />
                                    </div>
                                    {{ end }}

                                    <div>
                                        <h3 class="font-bold text-white">{{ .Name }}</h3>
                                        <div class="flex items-center mt-1 text-sm text-gray-300">
                                            <span class="openTime mr-1">{{ .OpenTime }}</span> -
                                            <span class="closeTime ml-1">{{ .CloseTime }}</span>
                                        </div>
                                        <div class="flex items-center mt-2 space-x-2">
                                            {{ if .HasSpecialAward }}
                                            <span
                                                class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-purple-600/20 text-purple-400">
                                                <img src="/assets/icon/wand-sparkles.svg" alt="Special Award"
                                                    class="h-3 w-3 mr-1 invert opacity-70" />
                                                Special Award
                                            </span>
                                            {{ end }}
                                            {{ if .HasSouvenir }}
                                            <span
                                                class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-600/20 text-blue-400">
                                                <img src="/assets/icon/gift.svg" alt="Souvenir"
                                                    class="h-3 w-3 mr-1 invert opacity-70" />
                                                Souvenir
                                            </span>
                                            {{ end }}
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col items-end space-y-2">
                                    <div class="text-sm text-right">
                                        <span class="status px-2 py-1 rounded-full text-xs 
                                                {{ if eq .Status " WAITING" }}bg-blue-600/20 text-blue-400 {{ else if
                                            eq .Status "OPEN" }}bg-green-600/20 text-green-400 {{ else if eq
                                            .Status "JUDGING" }}bg-yellow-600/20 text-yellow-400 {{ else if eq
                                            .Status "RESULTS" }}bg-orange-600/20 text-orange-400 {{ else }}bg-red-600/20
                                            text-red-400{{ end }}">
                                            {{ .Status }}
                                        </span>
                                    </div>

                                    <div class="text-xs text-gray-500">
                                        ID: {{ .ContestId }}
                                    </div>

                                    <div class="flex space-x-2">
                                        {{ if or (eq .Status "OPEN") (eq .Status "JUDGING") }}
                                        <a href="/panel/contests/view/{{ .ContestId }}"
                                            class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/eye.svg" alt="View"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Entries</span>
                                        </a>
                                        {{ end }}

                                        <a href="/panel/contests/edit/{{ .ContestId }}"
                                            class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/pencil.svg" alt="Edit"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Edit</span>
                                        </a>

                                        <button onclick="deleteEntry('{{ .ContestId }}')"
                                            class="inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/trash.svg" alt="Delete"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Delete</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {{ end }}
                            {{ else }}
                            <div class="p-12 text-center">
                                <div
                                    class="mx-auto rounded-full bg-gray-700/50 p-4 w-16 h-16 flex items-center justify-center mb-4">
                                    <img src="/assets/icon/flag-off.svg" alt="No Contests"
                                        class="h-8 w-8 invert opacity-50" />
                                </div>
                                <h3 class="text-lg font-medium text-gray-400 mb-2">No Contests Available</h3>
                                <p class="text-sm text-gray-500 max-w-sm mx-auto mb-6">
                                    You haven't created any contests yet. Click the button below to create your first
                                    contest.
                                </p>
                                <a href="/panel/contests/add"
                                    class="inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition duration-200 text-sm">
                                    <img src="/assets/icon/circle-plus.svg" alt="Create" class="h-5 w-5 mr-2 invert" />
                                    <span>Create Your First Contest</span>
                                </a>
                            </div>
                            {{ end }}
                        </div>
                    </div>

                    <!-- Similar structure for other tabs - Waiting tab -->
                    <div class="rounded-lg hidden" id="waiting" role="tabpanel" aria-labelledby="waiting-tab">
                        <div class="space-y-4">
                            {{ if .waitingContests }}
                            {{ range .waitingContests }}
                            <!-- Contest item (same structure as above with blue color theme) -->
                            <div
                                class="flex items-center justify-between p-4 bg-blue-700/10 rounded-lg border border-blue-600/30 hover:bg-blue-700/20 transition-colors">
                                <!-- Same content as above -->
                                <div class="flex items-center space-x-4">
                                    {{ if .HasThumbnail }}
                                    <div class="relative">
                                        <img src="{{ printf " /assets/contest/%d/thumbnail.jpg" .ContestId }}"
                                            alt="{{ .Name }}" class="h-16 w-auto rounded-lg border border-gray-600" />
                                    </div>
                                    {{ else }}
                                    <div class="h-16 w-16 rounded-lg bg-gray-600 flex items-center justify-center">
                                        <img src="/assets/icon/image-off.svg" alt="No Image"
                                            class="h-8 w-8 invert opacity-30" />
                                    </div>
                                    {{ end }}

                                    <div>
                                        <h3 class="font-bold text-white">{{ .Name }}</h3>
                                        <div class="flex items-center mt-1 text-sm text-gray-300">
                                            <span class="openTime mr-1">{{ .OpenTime }}</span> -
                                            <span class="closeTime ml-1">{{ .CloseTime }}</span>
                                        </div>
                                        <div class="flex items-center mt-2 space-x-2">
                                            {{ if .HasSpecialAward }}
                                            <span
                                                class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-purple-600/20 text-purple-400">
                                                <img src="/assets/icon/wand-sparkles.svg" alt="Special Award"
                                                    class="h-3 w-3 mr-1 invert opacity-70" />
                                                Special Award
                                            </span>
                                            {{ end }}
                                            {{ if .HasSouvenir }}
                                            <span
                                                class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-600/20 text-blue-400">
                                                <img src="/assets/icon/gift.svg" alt="Souvenir"
                                                    class="h-3 w-3 mr-1 invert opacity-70" />
                                                Souvenir
                                            </span>
                                            {{ end }}
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col items-end space-y-2">
                                    <div class="text-sm text-right">
                                        <span
                                            class="status px-2 py-1 rounded-full text-xs bg-blue-600/20 text-blue-400">
                                            {{ .Status }}
                                        </span>
                                    </div>

                                    <div class="text-xs text-gray-500">
                                        ID: {{ .ContestId }}
                                    </div>

                                    <div class="flex space-x-2">
                                        <a href="/panel/contests/edit/{{ .ContestId }}"
                                            class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/pen-to-square.svg" alt="Edit"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Edit</span>
                                        </a>

                                        <button onclick="deleteEntry('{{ .ContestId }}')"
                                            class="inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/trash.svg" alt="Delete"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Delete</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {{ end }}
                            {{ else }}
                            <div class="p-12 text-center">
                                <div
                                    class="mx-auto rounded-full bg-gray-700/50 p-4 w-16 h-16 flex items-center justify-center mb-4">
                                    <img src="/assets/icon/flag-off.svg" alt="No Contests"
                                        class="h-8 w-8 invert opacity-50" />
                                </div>
                                <h3 class="text-lg font-medium text-gray-400 mb-2">No Waiting Contests</h3>
                                <p class="text-sm text-gray-500 max-w-sm mx-auto mb-6">
                                    There are no contests in the waiting phase.
                                </p>
                            </div>
                            {{ end }}
                        </div>
                    </div>

                    <!-- Active tab -->
                    <div class="rounded-lg hidden" id="active" role="tabpanel" aria-labelledby="active-tab">
                        <!-- Content similar to waiting tab but with green color theme -->
                        <div class="space-y-4">
                            {{ if .openContests }}
                            {{ range .openContests }}
                            <div
                                class="flex items-center justify-between p-4 bg-green-700/10 rounded-lg border border-green-600/30 hover:bg-green-700/20 transition-colors">
                                <!-- Same structure as above but with green theme -->
                                <div class="flex items-center space-x-4">
                                    {{ if .HasThumbnail }}
                                    <div class="relative">
                                        <a href="/panel/contests/view/{{ .ContestId }}">
                                            <img src="{{ printf " /assets/contest/%d/thumbnail.jpg" .ContestId }}"
                                                alt="{{ .Name }}"
                                                class="h-16 w-auto rounded-lg border border-gray-600" />
                                        </a>
                                    </div>
                                    {{ else }}
                                    <div class="h-16 w-16 rounded-lg bg-gray-600 flex items-center justify-center">
                                        <img src="/assets/icon/image-off.svg" alt="No Image"
                                            class="h-8 w-8 invert opacity-30" />
                                    </div>
                                    {{ end }}

                                    <div>
                                        <h3 class="font-bold text-white">
                                            <a href="/panel/contests/view/{{ .ContestId }}">{{ .Name }}</a>
                                        </h3>
                                        <div class="flex items-center mt-1 text-sm text-gray-300">
                                            <span class="openTime mr-1">{{ .OpenTime }}</span> -
                                            <span class="closeTime ml-1">{{ .CloseTime }}</span>
                                        </div>
                                        <div class="flex items-center mt-2 space-x-2">
                                            {{ if .HasSpecialAward }}
                                            <span
                                                class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-purple-600/20 text-purple-400">
                                                <img src="/assets/icon/wand-sparkles.svg" alt="Special Award"
                                                    class="h-3 w-3 mr-1 invert opacity-70" />
                                                Special Award
                                            </span>
                                            {{ end }}
                                            {{ if .HasSouvenir }}
                                            <span
                                                class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-600/20 text-blue-400">
                                                <img src="/assets/icon/gift.svg" alt="Souvenir"
                                                    class="h-3 w-3 mr-1 invert opacity-70" />
                                                Souvenir
                                            </span>
                                            {{ end }}
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-col items-end space-y-2">
                                    <div class="text-sm text-right">
                                        <span
                                            class="status px-2 py-1 rounded-full text-xs bg-green-600/20 text-green-400">
                                            {{ .Status }}
                                        </span>
                                    </div>

                                    <div class="text-xs text-gray-500">
                                        ID: {{ .ContestId }}
                                    </div>

                                    <div class="flex space-x-2">
                                        <a href="/panel/contests/view/{{ .ContestId }}"
                                            class="inline-flex items-center px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/eye.svg" alt="View"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Entries</span>
                                        </a>

                                        <a href="/panel/contests/edit/{{ .ContestId }}"
                                            class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/pen-to-square.svg" alt="Edit"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Edit</span>
                                        </a>

                                        <button onclick="deleteEntry('{{ .ContestId }}')"
                                            class="inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200 text-xs">
                                            <img src="/assets/icon/trash.svg" alt="Delete"
                                                class="h-3.5 w-3.5 mr-1.5 invert" />
                                            <span>Delete</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {{ end }}
                            {{ else }}
                            <div class="p-12 text-center">
                                <div
                                    class="mx-auto rounded-full bg-gray-700/50 p-4 w-16 h-16 flex items-center justify-center mb-4">
                                    <img src="/assets/icon/flag-off.svg" alt="No Contests"
                                        class="h-8 w-8 invert opacity-50" />
                                </div>
                                <h3 class="text-lg font-medium text-gray-400 mb-2">No Active Contests</h3>
                                <p class="text-sm text-gray-500 max-w-sm mx-auto">
                                    There are no contests currently open for submissions.
                                </p>
                            </div>
                            {{ end }}
                        </div>
                    </div>

                    <!-- Judging tab -->
                    <div class="rounded-lg hidden" id="judging" role="tabpanel" aria-labelledby="judging-tab">
                        <div class="space-y-4">
                            {{ if .judgingContests }}
                                {{ range .judgingContests }}
                                <div class="flex items-center justify-between p-4 bg-yellow-700/10 rounded-lg border border-yellow-600/30 hover:bg-yellow-700/20 transition-colors">
                                    <div class="flex items-center space-x-4">
                                        {{ if .HasThumbnail }}
                                        <div class="relative">
                                            <a href="/panel/contests/view/{{ .ContestId }}">
                                                <img src="{{ printf "/assets/contest/%d/thumbnail.jpg" .ContestId }}" 
                                                    alt="{{ .Name }}" 
                                                    class="h-16 w-auto rounded-lg border border-gray-600" />
                                            </a>
                                        </div>
                                        {{ else }}
                                        <div class="h-16 w-16 rounded-lg bg-gray-600 flex items-center justify-center">
                                            <img src="/assets/icon/image-off.svg" alt="No Image" class="h-8 w-8 invert opacity-30" />
                                        </div>
                                        {{ end }}
                                        
                                        <div>
                                            <h3 class="font-bold text-white">
                                                <a href="/panel/contests/view/{{ .ContestId }}">{{ .Name }}</a>
                                            </h3>
                                            <div class="flex items-center mt-1 text-sm text-gray-300">
                                                <span class="openTime mr-1">{{ .OpenTime }}</span> - 
                                                <span class="closeTime ml-1">{{ .CloseTime }}</span>
                                            </div>
                                            <div class="flex items-center mt-2 space-x-2">
                                                {{ if .HasSpecialAward }}
                                                <span class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-purple-600/20 text-purple-400">
                                                    <img src="/assets/icon/wand-sparkles.svg" alt="Special Award" class="h-3 w-3 mr-1 invert opacity-70" />
                                                    Special Award
                                                </span>
                                                {{ end }}
                                                {{ if .HasSouvenir }}
                                                <span class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-600/20 text-blue-400">
                                                    <img src="/assets/icon/gift.svg" alt="Souvenir" class="h-3 w-3 mr-1 invert opacity-70" />
                                                    Souvenir
                                                </span>
                                                {{ end }}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex flex-col items-end space-y-2">
                                        <div class="text-sm text-right">
                                            <span class="status px-2 py-1 rounded-full text-xs bg-yellow-600/20 text-yellow-400">
                                                {{ .Status }}
                                            </span>
                                        </div>
                                        
                                        <div class="text-xs text-gray-500">
                                            ID: {{ .ContestId }}
                                        </div>
                                        
                                        <div class="flex space-x-2">
                                            <a href="/panel/contests/view/{{ .ContestId }}"
                                                class="inline-flex items-center px-3 py-1.5 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/eye.svg" alt="View" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Entries</span>
                                            </a>
                                            
                                            <a href="/panel/contests/edit/{{ .ContestId }}"
                                                class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/pencil.svg" alt="Edit" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Edit</span>
                                            </a>
                                            
                                            <button onclick="deleteEntry('{{ .ContestId }}')"
                                                class="inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/trash.svg" alt="Delete" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Delete</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                {{ end }}
                            {{ else }}
                            <div class="p-12 text-center">
                                <div class="mx-auto rounded-full bg-gray-700/50 p-4 w-16 h-16 flex items-center justify-center mb-4">
                                    <img src="/assets/icon/flag-off.svg" alt="No Contests" class="h-8 w-8 invert opacity-50" />
                                </div>
                                <h3 class="text-lg font-medium text-gray-400 mb-2">No Judging Contests</h3>
                                <p class="text-sm text-gray-500 max-w-sm mx-auto">
                                    There are no contests currently in the judging phase.
                                </p>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    
                    <!-- Results tab -->
                    <div class="rounded-lg hidden" id="results" role="tabpanel" aria-labelledby="results-tab">
                        <div class="space-y-4">
                            {{ if .resultsContests }}
                                {{ range .resultsContests }}
                                <div class="flex items-center justify-between p-4 bg-orange-700/10 rounded-lg border border-orange-600/30 hover:bg-orange-700/20 transition-colors">
                                    <div class="flex items-center space-x-4">
                                        {{ if .HasThumbnail }}
                                        <div class="relative">
                                            <a href="/panel/contests/view/{{ .ContestId }}">
                                                <img src="{{ printf "/assets/contest/%d/thumbnail.jpg" .ContestId }}" 
                                                    alt="{{ .Name }}" 
                                                    class="h-16 w-auto rounded-lg border border-gray-600" />
                                            </a>
                                        </div>
                                        {{ else }}
                                        <div class="h-16 w-16 rounded-lg bg-gray-600 flex items-center justify-center">
                                            <img src="/assets/icon/image-off.svg" alt="No Image" class="h-8 w-8 invert opacity-30" />
                                        </div>
                                        {{ end }}
                                        
                                        <div>
                                            <h3 class="font-bold text-white">
                                                <a href="/panel/contests/view/{{ .ContestId }}">{{ .Name }}</a>
                                            </h3>
                                            <div class="flex items-center mt-1 text-sm text-gray-300">
                                                <span class="openTime mr-1">{{ .OpenTime }}</span> - 
                                                <span class="closeTime ml-1">{{ .CloseTime }}</span>
                                            </div>
                                            <div class="flex items-center mt-2 space-x-2">
                                                {{ if .HasSpecialAward }}
                                                <span class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-purple-600/20 text-purple-400">
                                                    <img src="/assets/icon/wand-sparkles.svg" alt="Special Award" class="h-3 w-3 mr-1 invert opacity-70" />
                                                    Special Award
                                                </span>
                                                {{ end }}
                                                {{ if .HasSouvenir }}
                                                <span class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-600/20 text-blue-400">
                                                    <img src="/assets/icon/gift.svg" alt="Souvenir" class="h-3 w-3 mr-1 invert opacity-70" />
                                                    Souvenir
                                                </span>
                                                {{ end }}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex flex-col items-end space-y-2">
                                        <div class="text-sm text-right">
                                            <span class="status px-2 py-1 rounded-full text-xs bg-orange-600/20 text-orange-400">
                                                {{ .Status }}
                                            </span>
                                        </div>
                                        
                                        <div class="text-xs text-gray-500">
                                            ID: {{ .ContestId }}
                                        </div>
                                        
                                        <div class="flex space-x-2">
                                            <a href="/panel/contests/view/{{ .ContestId }}"
                                                class="inline-flex items-center px-3 py-1.5 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/trophy.svg" alt="Results" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Results</span>
                                            </a>
                                            
                                            <a href="/panel/contests/edit/{{ .ContestId }}"
                                                class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/pencil.svg" alt="Edit" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Edit</span>
                                            </a>
                                            
                                            <button onclick="deleteEntry('{{ .ContestId }}')"
                                                class="inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/trash.svg" alt="Delete" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Delete</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                {{ end }}
                            {{ else }}
                            <div class="p-12 text-center">
                                <div class="mx-auto rounded-full bg-gray-700/50 p-4 w-16 h-16 flex items-center justify-center mb-4">
                                    <img src="/assets/icon/flag-off.svg" alt="No Contests" class="h-8 w-8 invert opacity-50" />
                                </div>
                                <h3 class="text-lg font-medium text-gray-400 mb-2">No Results Contests</h3>
                                <p class="text-sm text-gray-500 max-w-sm mx-auto">
                                    There are no contests currently showing results.
                                </p>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                    
                    <!-- Closed tab -->
                    <div class="rounded-lg hidden" id="closed" role="tabpanel" aria-labelledby="closed-tab">
                        <div class="space-y-4">
                            {{ if .closedContests }}
                                {{ range .closedContests }}
                                <div class="flex items-center justify-between p-4 bg-red-700/10 rounded-lg border border-red-600/30 hover:bg-red-700/20 transition-colors">
                                    <div class="flex items-center space-x-4">
                                        {{ if .HasThumbnail }}
                                        <div class="relative">
                                            <img src="{{ printf "/assets/contest/%d/thumbnail.jpg" .ContestId }}" 
                                                alt="{{ .Name }}" 
                                                class="h-16 w-auto rounded-lg border border-gray-600" />
                                        </div>
                                        {{ else }}
                                        <div class="h-16 w-16 rounded-lg bg-gray-600 flex items-center justify-center">
                                            <img src="/assets/icon/image-off.svg" alt="No Image" class="h-8 w-8 invert opacity-30" />
                                        </div>
                                        {{ end }}
                                        
                                        <div>
                                            <h3 class="font-bold text-white">{{ .Name }}</h3>
                                            <div class="flex items-center mt-1 text-sm text-gray-300">
                                                <span class="openTime mr-1">{{ .OpenTime }}</span> - 
                                                <span class="closeTime ml-1">{{ .CloseTime }}</span>
                                            </div>
                                            <div class="flex items-center mt-2 space-x-2">
                                                {{ if .HasSpecialAward }}
                                                <span class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-purple-600/20 text-purple-400">
                                                    <img src="/assets/icon/wand-sparkles.svg" alt="Special Award" class="h-3 w-3 mr-1 invert opacity-70" />
                                                    Special Award
                                                </span>
                                                {{ end }}
                                                {{ if .HasSouvenir }}
                                                <span class="inline-flex items-center px-2 py-1 text-xs rounded-full bg-blue-600/20 text-blue-400">
                                                    <img src="/assets/icon/gift.svg" alt="Souvenir" class="h-3 w-3 mr-1 invert opacity-70" />
                                                    Souvenir
                                                </span>
                                                {{ end }}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="flex flex-col items-end space-y-2">
                                        <div class="text-sm text-right">
                                            <span class="status px-2 py-1 rounded-full text-xs bg-red-600/20 text-red-400">
                                                {{ .Status }}
                                            </span>
                                        </div>
                                        
                                        <div class="text-xs text-gray-500">
                                            ID: {{ .ContestId }}
                                        </div>
                                        
                                        <div class="flex space-x-2">
                                            <a href="/panel/contests/edit/{{ .ContestId }}"
                                                class="inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/pencil.svg" alt="Edit" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Edit</span>
                                            </a>
                                            
                                            <button onclick="deleteEntry('{{ .ContestId }}')"
                                                class="inline-flex items-center px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition duration-200 text-xs">
                                                <img src="/assets/icon/trash.svg" alt="Delete" class="h-3.5 w-3.5 mr-1.5 invert" />
                                                <span>Delete</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                {{ end }}
                            {{ else }}
                            <div class="p-12 text-center">
                                <div class="mx-auto rounded-full bg-gray-700/50 p-4 w-16 h-16 flex items-center justify-center mb-4">
                                    <img src="/assets/icon/flag-off.svg" alt="No Contests" class="h-8 w-8 invert opacity-50" />
                                </div>
                                <h3 class="text-lg font-medium text-gray-400 mb-2">No Closed Contests</h3>
                                <p class="text-sm text-gray-500 max-w-sm mx-auto">
                                    There are no closed contests in the system.
                                </p>
                            </div>
                            {{ end }}
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-6 flex justify-between items-center">
                <div class="text-sm text-gray-500">
                    Showing {{ .numberOfContests }} total contest{{ if ne .numberOfContests 1 }}s{{ end }}
                </div>

                <div class="flex items-center space-x-2">
                    <div class="text-sm text-gray-400 mr-2">
                        <span class="inline-flex items-center mr-2">
                            <img src="/assets/icon/wand-sparkles.svg" alt="Special Award"
                                class="h-3 w-3 mr-1 invert opacity-70" />
                            Special Award
                        </span>
                        <span class="inline-flex items-center">
                            <img src="/assets/icon/gift.svg" alt="Souvenir" class="h-3 w-3 mr-1 invert opacity-70" />
                            Souvenir
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Format dates
        const openTimeElements = document.getElementsByClassName('openTime');
        const closeTimeElements = document.getElementsByClassName('closeTime');

        function formatDate(dateString) {
            const date = new Date(dateString);
            const day = date.getDate();
            const month = date.getMonth() + 1; // getMonth() returns 0-11
            return `${day}/${month}`;
        }

        Array.from(openTimeElements).forEach(element => {
            element.textContent = formatDate(element.textContent);
        });

        Array.from(closeTimeElements).forEach(element => {
            element.textContent = formatDate(element.textContent);
        });

        // Tab handling
        const tabs = document.querySelectorAll('button[data-tabs-target]');
        const tabPanels = document.querySelectorAll('[role="tabpanel"]');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetPanel = document.querySelector(tab.getAttribute('data-tabs-target'));

                // Hide all tab panels
                tabPanels.forEach(panel => {
                    panel.classList.add('hidden');
                });

                // Show the selected tab panel
                targetPanel.classList.remove('hidden');

                // Remove active styles from all tabs
                tabs.forEach(t => {
                    t.setAttribute('aria-selected', 'false');
                    t.classList.remove('bg-gray-700');
                    t.classList.add('text-gray-300');
                    t.classList.remove('text-white');
                });

                // Set active styles to the clicked tab
                tab.setAttribute('aria-selected', 'true');
                tab.classList.add('bg-gray-700');
                tab.classList.remove('text-gray-300');
                tab.classList.add('text-white');
            });
        });

        // Show success/error messages
        const hash = window.location.hash;
        if (hash) {
            let message = '';
            let messageClass = '';

            switch (hash) {
                case '#edit_success':
                    message = '<div class="flex items-center"><img src="/assets/icon/check-circle.svg" alt="Success" class="h-5 w-5 mr-2 invert" /><span>Contest updated successfully</span></div>';
                    messageClass = 'bg-green-600/20 border-green-600/30 text-green-400';
                    break;
                case '#add_success':
                    message = '<div class="flex items-center"><img src="/assets/icon/check-circle.svg" alt="Success" class="h-5 w-5 mr-2 invert" /><span>Contest created successfully</span></div>';
                    messageClass = 'bg-green-600/20 border-green-600/30 text-green-400';
                    break;
                case '#delete_success':
                    message = '<div class="flex items-center"><img src="/assets/icon/check-circle.svg" alt="Success" class="h-5 w-5 mr-2 invert" /><span>Contest deleted successfully</span></div>';
                    messageClass = 'bg-red-600/20 border-red-600/30 text-red-400';
                    break;
            }

            if (message) {
                const alertDiv = document.createElement('div');
                alertDiv.className = `p-4 mb-6 rounded-lg border ${messageClass}`;
                alertDiv.innerHTML = message;

                const tabContent = document.querySelector('#default-tab-content');
                tabContent.prepend(alertDiv);

                setTimeout(() => {
                    alertDiv.style.opacity = '0';
                    alertDiv.style.transition = 'opacity 0.5s ease-out';
                    setTimeout(() => alertDiv.remove(), 500);
                }, 5000);
            }
        }
    });

    function deleteEntry(contestId) {
        if (confirm("Are you sure you want to delete this contest? This action cannot be undone.")) {
            fetch(`/panel/contests/delete/${contestId}`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(response => {
                if (response.ok) {
                    window.location.href = "/panel/contests#delete_success";
                } else {
                    alert("Failed to delete contest.");
                }
            });
        }
    }
</script>

{{ template "footer.html" . }}